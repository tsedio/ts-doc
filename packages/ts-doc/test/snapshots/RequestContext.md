
---
sidebar: auto
meta:
 - name: keywords
   description: api typescript node.js documentation RequestContext class
---
# RequestContext <Badge text="Class" type="class"/>  <Badge text="private" title="private" type="private"/>
<!-- Summary -->
<section class="symbol-info"><table class="is-full-width"><tbody><tr><th>Module</th><td><div class="lang-typescript"><span class="token keyword">import</span> { RequestContext }&nbsp;<span class="token keyword">from</span>&nbsp;<span class="token string">"@tsed/common/src/platform/domain/RequestContext"</span></div></td></tr><tr><th>Source</th><td><a href="https://github.com/repo/blob/v1.0.0/packages/common/src/platform/domain/RequestContext.ts#L0-L0">/packages/common/src/platform/domain/RequestContext.ts</a></td></tr></tbody></table></section>

<!-- Overview -->
## Overview


<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang "><span class="token keyword">class</span> RequestContext <span class="token keyword">extends</span> Map&lt;<span class="token keyword">any</span><span class="token punctuation">,</span> <span class="token keyword">any</span>&gt; <span class="token punctuation">{</span>
    /**
     * Request id generated by @@contextMiddleware@@.
     *
     * <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span> tip
     * By default Ts.ED generate uuid like that `<span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>.<span class="token function">replace</span><span class="token punctuation">(</span>/-/gi<span class="token punctuation">,</span> ""<span class="token punctuation">)</span><span class="token punctuation">)</span>`.
     * Dash are removed to simplify tracking logs in Kibana
     * <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>
     *
     * <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span> tip
     * Request id can by customized by changing the server configuration.
     *
     * ```typescript
     * @<span class="token function">ServerSettings</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     *   logger<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     *     reqIdBuilder<span class="token punctuation">:</span> createUniqId // give your own id generator function
     *   <span class="token punctuation">}</span>
     * <span class="token punctuation">}</span><span class="token punctuation">)</span>
     * <span class="token keyword">class</span> Server <span class="token punctuation">{</span>
     *
     * <span class="token punctuation">}</span>
     * ```
     * <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>
     *
     */
    <span class="token keyword">readonly</span> id<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>
    /**
     * <span class="token keyword">Date</span> when request have been handled by the server. @@RequestLogger@@ use this date to log request duration.
     */
    <span class="token keyword">readonly</span> dateStart<span class="token punctuation">:</span> <span class="token keyword">Date</span><span class="token punctuation">;</span>
    /**
     * The request container used by the Ts.ED DI. It contain all services annotated with `@<span class="token function">Scope</span><span class="token punctuation">(</span>ProviderScope.REQUEST<span class="token punctuation">)</span>`
     */
    container<span class="token punctuation">:</span> LocalsContainer&lt;<span class="token keyword">any</span>&gt;<span class="token punctuation">;</span>
    /**
     * The current @@EndpointMetadata@@ resolved by Ts.ED during the request.
     */
    endpoint<span class="token punctuation">:</span> EndpointMetadata<span class="token punctuation">;</span>
    /**
     * The data return by the previous endpoint if you use multiple handler on the same route. By default data is empty.
     */
    data<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span>
    /**
     * Logger attached to the context request.
     */
    logger<span class="token punctuation">:</span> RequestLogger<span class="token punctuation">;</span>
    /**
     * The current @@PlatformResponse@@.
     */
    response<span class="token punctuation">:</span> PlatformResponse<span class="token punctuation">;</span>
    /**
     * The current @@PlatformRequest@@.
     */
    request<span class="token punctuation">:</span> PlatformRequest<span class="token punctuation">;</span>
    /**
     *
     */
    injector<span class="token punctuation">:</span> InjectorService<span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">,</span> injector<span class="token punctuation">,</span> logger<span class="token punctuation">,</span> response<span class="token punctuation">,</span> request<span class="token punctuation">,</span> endpoint<span class="token punctuation">,</span> ...options <span class="token punctuation">}</span><span class="token punctuation">:</span> <a href="/api/common/platform/domain/RequestContextOptions.html"><span class="token">RequestContextOptions</span></a><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise&lt;<span class="token keyword">void</span>&gt;<span class="token punctuation">;</span>
    <span class="token function">emit</span><span class="token punctuation">(</span>eventName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> ...args<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise&lt;<span class="token keyword">void</span>&gt;<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>



<!-- Members -->




## Members


::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang "><span class="token keyword">readonly</span> id<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span></code></pre></div>

</div>



Request id generated by @@contextMiddleware@@.

::: tip
By default Ts.ED generate uuid like that `uuidv4().replace(/-/gi, ""))`.
Dash are removed to simplify tracking logs in Kibana
:::

::: tip
Request id can by customized by changing the server configuration.

```typescript
@ServerSettings({
  logger: {
    reqIdBuilder: createUniqId // give your own id generator function
  }
})
class Server {

}
```
:::




:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang "><span class="token keyword">readonly</span> dateStart<span class="token punctuation">:</span> <span class="token keyword">Date</span><span class="token punctuation">;</span></code></pre></div>

</div>



Date when request have been handled by the server. @@RequestLogger@@ use this date to log request duration.



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang ">container<span class="token punctuation">:</span> LocalsContainer&lt;<span class="token keyword">any</span>&gt;<span class="token punctuation">;</span></code></pre></div>

</div>



The request container used by the Ts.ED DI. It contain all services annotated with `@Scope(ProviderScope.REQUEST)`



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang ">endpoint<span class="token punctuation">:</span> EndpointMetadata<span class="token punctuation">;</span></code></pre></div>

</div>



The current @@EndpointMetadata@@ resolved by Ts.ED during the request.



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang ">data<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span></code></pre></div>

</div>



The data return by the previous endpoint if you use multiple handler on the same route. By default data is empty.



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang ">logger<span class="token punctuation">:</span> RequestLogger<span class="token punctuation">;</span></code></pre></div>

</div>



Logger attached to the context request.



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang ">response<span class="token punctuation">:</span> PlatformResponse<span class="token punctuation">;</span></code></pre></div>

</div>



The current @@PlatformResponse@@.



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang ">request<span class="token punctuation">:</span> PlatformRequest<span class="token punctuation">;</span></code></pre></div>

</div>



The current @@PlatformRequest@@.



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang ">injector<span class="token punctuation">:</span> InjectorService<span class="token punctuation">;</span></code></pre></div>

</div>



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang "><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise&lt;<span class="token keyword">void</span>&gt;<span class="token punctuation">;</span></code></pre></div>

</div>



:::



***



::: v-pre

<div class="method-overview">
<div class="language-typescript"><pre class="language-typescript" v-pre=""><code class="typescript-lang "><span class="token function">emit</span><span class="token punctuation">(</span>eventName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> ...args<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise&lt;<span class="token keyword">void</span>&gt;<span class="token punctuation">;</span></code></pre></div>

</div>



:::









